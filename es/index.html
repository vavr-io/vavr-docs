<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Daniel Dietrich, Robert Winkler, Grzegorz Piwowarek">
<title>Guía del usuario de Vavr</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Guía del usuario de Vavr</h1>
<div class="details">
<span id="author" class="author">Daniel Dietrich, Robert Winkler, Grzegorz Piwowarek</span><br>
<span id="revnumber">version 0.10.5,</span>
<span id="revdate">2024-12-06</span>
<br><span id="revremark">traducido por Geovanny Mendoza</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introducción">1. Introducción</a>
<ul class="sectlevel2">
<li><a href="#_estructuras_de_datos_funcionales_en_java_8_con_vavr">1.1. Estructuras de Datos Funcionales en Java 8 con Vavr</a></li>
<li><a href="#_programación_funcional">1.2. Programación Funcional</a>
<ul class="sectlevel3">
<li><a href="#_efectos_secundarios">1.2.1. Efectos Secundarios</a></li>
<li><a href="#_transparencia_referencial">1.2.2. Transparencia Referencial</a></li>
<li><a href="#_pensar_en_valores">1.2.3. Pensar en Valores</a></li>
</ul>
</li>
<li><a href="#_estructuras_de_datos_en_resumen">1.3. Estructuras de Datos en Resumen</a>
<ul class="sectlevel3">
<li><a href="#_estructuras_de_datos_mutables">1.3.1. Estructuras de Datos Mutables</a></li>
<li><a href="#_estructuras_de_datos_inmutables">1.3.2. Estructuras de Datos Inmutables</a></li>
<li><a href="#_estructuras_de_datos_persistentes">1.3.3. Estructuras de Datos Persistentes</a></li>
</ul>
</li>
<li><a href="#_estructuras_de_datos_funcionales">1.4. Estructuras de Datos Funcionales</a>
<ul class="sectlevel3">
<li><a href="#_linked_list">1.4.1. Linked List</a></li>
<li><a href="#_queue">1.4.2. Queue</a></li>
<li><a href="#_conjuntos_ordenados_sorted_set">1.4.3. Conjuntos Ordenados (<em>Sorted Set</em>)</a></li>
</ul>
</li>
<li><a href="#_estado_de_las_colecciones">1.5. Estado de las Colecciones</a>
<ul class="sectlevel3">
<li><a href="#_seq">1.5.1. Seq</a></li>
<li><a href="#_set_y_map">1.5.2. Set y Map</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_comenzando">2. Comenzando</a>
<ul class="sectlevel2">
<li><a href="#_gradle">2.1. Gradle</a></li>
<li><a href="#_maven">2.2. Maven</a></li>
<li><a href="#_independiente">2.3. Independiente</a></li>
<li><a href="#_snapshots">2.4. Snapshots</a>
<ul class="sectlevel3">
<li><a href="#_gradle_2">2.4.1. Gradle</a></li>
<li><a href="#_maven_2">2.4.2. Maven</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_guía_de_uso">3. Guía de Uso</a>
<ul class="sectlevel2">
<li><a href="#_tuplas">3.1. Tuplas</a>
<ul class="sectlevel3">
<li><a href="#_crear_una_tupla">3.1.1. Crear una tupla</a></li>
<li><a href="#_mapear_una_tupla_elemento_por_elemento">3.1.2. Mapear una tupla elemento por elemento</a></li>
<li><a href="#_mapear_una_tupla_usando_un_único_mapeador">3.1.3. Mapear una tupla usando un único mapeador</a></li>
<li><a href="#_transformar_una_tupla">3.1.4. Transformar una tupla</a></li>
</ul>
</li>
<li><a href="#_funciones">3.2. Funciones</a>
<ul class="sectlevel3">
<li><a href="#_composición">3.2.1. Composición</a></li>
<li><a href="#_elevación_lifting">3.2.2. Elevación (<em>Lifting</em>)</a></li>
<li><a href="#_aplicación_parcial">3.2.3. Aplicación Parcial</a></li>
<li><a href="#_currificación_currying">3.2.4. Currificación (Currying)</a></li>
<li><a href="#_memoización">3.2.5. Memoización</a></li>
</ul>
</li>
<li><a href="#_values">3.3. Values</a>
<ul class="sectlevel3">
<li><a href="#_option">3.3.1. Option</a></li>
<li><a href="#_try">3.3.2. Try</a></li>
<li><a href="#_lazy">3.3.3. Lazy</a></li>
<li><a href="#_either">3.3.4. Either</a></li>
<li><a href="#_future">3.3.5. Future</a></li>
<li><a href="#_validación_validation">3.3.6. Validación (Validation)</a></li>
</ul>
</li>
<li><a href="#_colecciones">3.4. Colecciones</a>
<ul class="sectlevel3">
<li><a href="#_list">3.4.1. List</a></li>
<li><a href="#_stream">3.4.2. Stream</a></li>
<li><a href="#_características_de_rendimiento">3.4.3. Características de Rendimiento</a></li>
</ul>
</li>
<li><a href="#_verificación_de_propiedades">3.5. Verificación de Propiedades</a></li>
<li><a href="#_pattern_matching">3.6. Pattern Matching</a>
<ul class="sectlevel3">
<li><a href="#_fundamentos_de_match_para_java">3.6.1. Fundamentos de Match para Java</a></li>
<li><a href="#_patrones">3.6.2. Patrones</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_license">4. License</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introducción">1. Introducción</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vavr (anteriormente conocido como Javaslang) es una biblioteca funcional para Java 8+ que ofrece tipos de datos persistentes y estructuras de control funcionales.</p>
</div>
<div class="sect2">
<h3 id="_estructuras_de_datos_funcionales_en_java_8_con_vavr">1.1. Estructuras de Datos Funcionales en Java 8 con Vavr</h3>
<div class="paragraph">
<p>Las <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">lambdas (λ)</a> de Java 8 nos permiten crear API maravillosas. Incrementan increíblemente la expresividad del lenguaje.</p>
</div>
<div class="paragraph">
<p><a href="http://vavr.io/">Vavr</a> aprovechó las lambdas para introducir diversas características nuevas basadas en patrones funcionales. Una de ellas es una biblioteca de colecciones funcionales diseñada como un reemplazo para las colecciones estándar de Java.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vavr-collections.png" alt="Vavr Collections">
</div>
</div>
<div class="paragraph">
<p><em>(Esta es solo una vista general; encontrarás una versión más detallada y legible a continuación.)</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_programación_funcional">1.2. Programación Funcional</h3>
<div class="paragraph">
<p>Antes de profundizar en los detalles sobre las estructuras de datos, quiero hablar sobre algunos conceptos básicos. Esto ayudará a entender por qué se creó <strong>Vavr</strong> y, en particular, por qué nuevas colecciones en Java eran necesarias.</p>
</div>
<div class="sect3">
<h4 id="_efectos_secundarios">1.2.1. Efectos Secundarios</h4>
<div class="paragraph">
<p>Las aplicaciones Java suelen estar llenas de <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">side-effects</a>. Estos mutan algún tipo de estado, tal vez el mundo exterior. Los efectos secundarios comunes incluyen cambiar objetos o variables <em>en el lugar</em>, imprimir en la consola, escribir en un archivo de registro o en una base de datos. Los efectos secundarios se consideran <em>perjudiciales</em> si afectan la semántica de nuestro programa de manera no deseada.</p>
</div>
<div class="paragraph">
<p>Por ejemplo, si una función lanza una excepción y esta excepción es <em>interpretada</em>, se considera un efecto secundario que <em>afecta nuestro programa</em>. Además, <a href="http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl">las excepciones son como declaraciones goto no locales</a>. Rompen el flujo de control normal. Sin embargo, las aplicaciones del mundo real realizan efectos secundarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">int</span> divide(<span class="type">int</span> dividend, <span class="type">int</span> divisor) {
    <span class="comment">// lanza una excepción si divisor es cero</span>
    <span class="keyword">return</span> dividend / divisor;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En un entorno funcional, estamos en la situación favorable de encapsular el efecto secundario en un <code>Try</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = Success(result) o Failure(exception)</span>
Try&lt;<span class="predefined-type">Integer</span>&gt; divide(<span class="predefined-type">Integer</span> dividend, <span class="predefined-type">Integer</span> divisor) {
    <span class="keyword">return</span> Try.of(() -&gt; dividend / divisor);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esta versión de <code>divide</code> ya no lanza ninguna excepción. Hicimos que el posible fallo sea explícito al usar el tipo <code>Try</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_transparencia_referencial">1.2.2. Transparencia Referencial</h4>
<div class="paragraph">
<p>Una función, o más generalmente una expresión, se denomina <a href="https://en.wikipedia.org/wiki/Referential_transparency">referencialmente transparente</a> si una llamada puede ser reemplazada por su valor sin afectar el comportamiento del programa. Dicho de manera sencilla, dado el mismo input, la salida siempre será la misma.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// no es referencialmente transparente</span>
<span class="predefined-type">Math</span>.random();

<span class="comment">// referencialmente transparente</span>
<span class="predefined-type">Math</span>.max(<span class="integer">1</span>, <span class="integer">2</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Una función se llama <a href="https://en.wikipedia.org/wiki/Pure_function">pura</a> si todas las expresiones involucradas son referencialmente transparentes. Una aplicación compuesta por funciones puras probablemente simplemente funcione si compila. Podemos razonar sobre ella. Las pruebas unitarias son fáciles de escribir y la depuración se convierte en un vestigio del pasado.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pensar_en_valores">1.2.3. Pensar en Valores</h4>
<div class="paragraph">
<p>Rich Hickey, el creador de Clojure, dio una charla excepcional sobre <a href="https://www.youtube.com/watch?v=-6BsiVyC1kM">El Valor de los Valores</a>. Los valores más interesantes son los valores <a href="https://en.wikipedia.org/wiki/Immutable_object">immutable</a>. La razón principal es que los valores inmutables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Son intrínsecamente seguros para hilos y, por lo tanto, no necesitan sincronización.</p>
</li>
<li>
<p>Son estables en relación con <em>equals</em> and <em>hashCode</em>,  lo que los convierte en claves de hash confiables.</p>
</li>
<li>
<p>No necesitan ser clonados.</p>
</li>
<li>
<p>Se comportan de manera segura con tipos al usarse en conversiones covariantes no verificadas (específicas de Java).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La clave para mejorar Java es usar <em>valores inmutables</em> junto con <em>funciones referencialmente transparentes</em>.</p>
</div>
<div class="paragraph">
<p>Vavr proporciona los <a href="http://static.javadoc.io/io.vavr/vavr/0.10.4/io/vavr/control/package-summary.html">controles</a> y las <a href="https://static.javadoc.io/io.vavr/vavr/0.10.4/io/vavr/collection/package-summary.html">colecciones</a> necesarios para lograr este objetivo en la programación cotidiana en Java.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estructuras_de_datos_en_resumen">1.3. Estructuras de Datos en Resumen</h3>
<div class="paragraph">
<p>La biblioteca de colecciones de Vavr incluye un conjunto rico de estructuras de datos funcionales construidas sobre lambdas. La única interfaz que comparten con las colecciones originales de Java es <code>Iterable</code>. La razón principal es que los métodos mutadores de las interfaces de colecciones de Java no devuelven un objeto del tipo de colección subyacente.</p>
</div>
<div class="paragraph">
<p>Veremos por qué esto es esencial observando los diferentes tipos de estructuras de datos.</p>
</div>
<div class="sect3">
<h4 id="_estructuras_de_datos_mutables">1.3.1. Estructuras de Datos Mutables</h4>
<div class="paragraph">
<p>Java es un lenguaje de programación orientado a objetos. Encapsulamos el estado en objetos para lograr ocultar los datos y proporcionamos métodos mutadores para controlar dicho estado. El <a href="https://en.wikipedia.org/wiki/Java_collections_framework">framework de colecciones de Java (JCF)</a> se basa en esta idea.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">interface</span> <span class="class">Collection</span>&lt;E&gt; {
    <span class="comment">// elimina todos los elementos de esta colección</span>
    <span class="type">void</span> clear();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hoy en día, considero que un tipo de retorno <em>void</em> es un indicio de mal diseño. Es evidencia de que ocurren <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">efectos secundarios</a> y de que el estado se está mutando. El estado mutable <em>Shared</em> es una fuente importante de fallos, no solo en un entorno concurrente.</p>
</div>
</div>
<div class="sect3">
<h4 id="_estructuras_de_datos_inmutables">1.3.2. Estructuras de Datos Inmutables</h4>
<div class="paragraph">
<p>Las estructuras de datos <a href="https://en.wikipedia.org/wiki/Immutable_object">Immutables</a> no pueden modificarse después de su creación. En el contexto de Java, se utilizan ampliamente en forma de wrappers de colecciones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; list = <span class="predefined-type">Collections</span>.unmodifiableList(otherList);

<span class="comment">// Boom!</span>
list.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">Por qué no?</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Existen varias bibliotecas que nos proporcionan métodos de utilidad similares. El resultado siempre es una vista no modificable de la colección específica. Por lo general, lanzará una excepción en tiempo de ejecución si llamamos a un método mutador.</p>
</div>
</div>
<div class="sect3">
<h4 id="_estructuras_de_datos_persistentes">1.3.3. Estructuras de Datos Persistentes</h4>
<div class="paragraph">
<p>Una <a href="https://en.wikipedia.org/wiki/Persistent_data_structure">estructura de datos persistente</a> conserva la versión anterior de sí misma cuando se modifica, y por lo tanto es efectivamente inmutable. Las estructuras de datos completamente persistentes permiten tanto actualizaciones como consultas en cualquier versión.</p>
</div>
<div class="paragraph">
<p>Muchas operaciones realizan solo pequeños cambios. Simplemente copiar la versión anterior no sería eficiente. Para ahorrar tiempo y memoria, es crucial identificar las similitudes entre dos versiones y compartir la mayor cantidad de datos posible.</p>
</div>
<div class="paragraph">
<p>Este modelo no impone ningún detalle de implementación específico. Aquí es donde entran en juego las estructuras de datos funcionales.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estructuras_de_datos_funcionales">1.4. Estructuras de Datos Funcionales</h3>
<div class="paragraph">
<p>También conocidas como <a href="https://en.wikipedia.org/wiki/Purely_functional">estructuras de datos <em>puramente</em> funcionales</a>, son <em>inmutables</em> y <em>persistentes</em>. Los métodos de las estructuras de datos funcionales son <em>referencialmente transparentes</em>.</p>
</div>
<div class="paragraph">
<p>Vavr incluye una amplia gama de las estructuras de datos funcionales más utilizadas. Los siguientes ejemplos se explican en detalle.</p>
</div>
<div class="sect3">
<h4 id="_linked_list">1.4.1. Linked List</h4>
<div class="paragraph">
<p>Una de las estructuras de datos funcionales más populares y también más simples es la lista enlazada <a href="https://en.wikipedia.org/wiki/Linked_list">(singly) linked List</a>. Esta estructura tiene un elemento principal <em>head</em> y una lista <em>tail</em> (cola). Una lista enlazada se comporta como una pila (Stack) que sigue el método <a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)">último en entrar, primero en salir (LIFO)</a>.</p>
</div>
<div class="paragraph">
<p>En  <a href="http://vavr.io/">Vavr</a>, podemos instanciar una lista de la siguiente manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = List(1, 2, 3)</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; list1 = <span class="predefined-type">List</span>.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cada elemento de la lista forma un nodo separado de la lista. La cola (<em>tail</em>) del último elemento es <code>Nil</code>, que representa la lista vacía.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/list1.png?w=660" alt="Lista 1">
</div>
</div>
<div class="paragraph">
<p>Esto nos permite compartir elementos entre diferentes versiones de la lista.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = List(0, 2, 3)</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; list2 = list1.tail().prepend(<span class="integer">0</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>El nuevo elemento principal <code>0</code> está <em>vinculado</em> a la cola de la lista original. La lista original permanece sin modificar.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/list2.png?w=660" alt="Lista 2">
</div>
</div>
<div class="paragraph">
<p>Estas operaciones se realizan en tiempo constante, es decir, son independientes del tamaño de la lista. La mayoría de las otras operaciones toman tiempo lineal. En Vavr, esto se expresa mediante la interfaz <code>LinearSeq</code>, que ya conocemos de Scala.</p>
</div>
<div class="paragraph">
<p>Si necesitamos estructuras de datos que permitan consultas en tiempo constante, Vavr ofrece <code>Array</code> y <code>Vector</code>. Ambos tienen capacidades de <a href="https://en.wikipedia.org/wiki/Random_access">acceso aleatorio</a>.</p>
</div>
<div class="paragraph">
<p>El tipo <code>Array</code> está respaldado por un array de objetos de Java. Las operaciones de inserción y eliminación toman tiempo lineal. Él <code>Vector</code> está entre <code>Array</code> y <code>List</code>. Tiene un buen rendimiento tanto en acceso aleatorio como en modificaciones.</p>
</div>
<div class="paragraph">
<p>De hecho, la lista enlazada también puede utilizarse para implementar una estructura de datos tipo cola (<em>Queue</em>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_queue">1.4.2. Queue</h4>
<div class="paragraph">
<p>Una cola funcional muy eficiente puede implementarse utilizando dos listas enlazadas. La lista <em>front</em> contiene los elementos que se eliminan de la <em>cola</em>, mientras que la lista <em>rear</em> contiene los elementos que se agregan. Ambas operaciones, <code>enqueue</code> y <code>dequeue</code>, se realizan en tiempo O(1).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt; queue = <span class="predefined-type">Queue</span>.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>)
                            .enqueue(<span class="integer">4</span>)
                            .enqueue(<span class="integer">5</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>La cola inicial se crea con tres elementos. Luego, se agregan dos elementos en la lista rear.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/queue1.png?w=660" alt="Queue 1">
</div>
</div>
<div class="paragraph">
<p>Si la lista front se queda sin elementos al hacer <code>dequeue</code>, la lista <em>rear</em> se invierte y se convierte en la nueva lista <em>front</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/queue2.png?w=660" alt="Queue 2">
</div>
</div>
<div class="paragraph">
<p>Al hacer <code>dequeue</code> de un elemento, obtenemos un par que incluye el primer elemento y la cola restante. Es necesario devolver la nueva versión de la cola porque las estructuras de datos funcionales son inmutables y persistentes. La cola original no se ve afectada.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt; queue = <span class="predefined-type">Queue</span>.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>);

<span class="comment">// = (1, Queue(2, 3))</span>
Tuple2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt; dequeued =
        queue.dequeue();</code></pre>
</div>
</div>
<div class="paragraph">
<p>¿Qué sucede cuando la cola está vacía? En ese caso, <code>dequeue()</code> lanzará una excepción <code>NoSuchElementException</code>. Para hacerlo de <em>manera funcional</em>, esperaríamos más bien un resultado opcional.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = Some((1, Queue()))</span>
<span class="predefined-type">Queue</span>.of(<span class="integer">1</span>).dequeueOption();

<span class="comment">// = None</span>
<span class="predefined-type">Queue</span>.empty().dequeueOption();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un resultado opcional puede procesarse aún más, ya sea que esté vacío o no.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = Queue(1)</span>
<span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt; queue = <span class="predefined-type">Queue</span>.of(<span class="integer">1</span>);

<span class="comment">// = Some((1, Queue()))</span>
<span class="predefined-type">Option</span>&lt;Tuple2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt;&gt; dequeued =
        queue.dequeueOption();

<span class="comment">// = Some(1)</span>
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt; element = dequeued.map(Tuple2::_1);

<span class="comment">// = Some(Queue())</span>
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">Queue</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt; remaining =
        dequeued.map(Tuple2::_2);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conjuntos_ordenados_sorted_set">1.4.3. Conjuntos Ordenados (<em>Sorted Set</em>)</h4>
<div class="paragraph">
<p>Los conjuntos ordenados son estructuras de datos que se utilizan con más frecuencia que las colas. Utilizamos árboles binarios de búsqueda para modelarlos de manera funcional. Estos árboles están compuestos por nodos que pueden tener hasta dos hijos y valores en cada nodo.</p>
</div>
<div class="paragraph">
<p>Construimos árboles binarios de búsqueda bajo la presencia de un orden, representado por un <code>Comparator</code>. Todos los valores del subárbol izquierdo de cualquier nodo dado son estrictamente menores que el valor del nodo. Todos los valores del subárbol derecho son estrictamente mayores.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = TreeSet(1, 2, 3, 4, 6, 7, 8)</span>
<span class="predefined-type">SortedSet</span>&lt;<span class="predefined-type">Integer</span>&gt; xs = <span class="predefined-type">TreeSet</span>.of(<span class="integer">6</span>, <span class="integer">1</span>, <span class="integer">3</span>, <span class="integer">2</span>, <span class="integer">4</span>, <span class="integer">7</span>, <span class="integer">8</span>);</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/binarytree1.png?w=660" alt="Árbol Binario 1">
</div>
</div>
<div class="paragraph">
<p>Las búsquedas en este tipo de árboles se realizan en tiempo O(log n). Comenzamos la búsqueda en la raíz y determinamos si encontramos el elemento. Debido al orden total de los valores, sabemos hacia dónde buscar a continuación, en la rama izquierda o derecha del árbol actual.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = TreeSet(1, 2, 3);</span>
<span class="predefined-type">SortedSet</span>&lt;<span class="predefined-type">Integer</span>&gt; set = <span class="predefined-type">TreeSet</span>.of(<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">1</span>, <span class="integer">2</span>);

<span class="comment">// = TreeSet(3, 2, 1);</span>
<span class="predefined-type">Comparator</span>&lt;<span class="predefined-type">Integer</span>&gt; c = (a, b) -&gt; b - a;
<span class="predefined-type">SortedSet</span>&lt;<span class="predefined-type">Integer</span>&gt; reversed = <span class="predefined-type">TreeSet</span>.of(c, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">1</span>, <span class="integer">2</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>La mayoría de las operaciones sobre árboles son intrínsecamente <a href="https://en.wikipedia.org/wiki/Recursion">recursivas</a>. La función de inserción se comporta de manera similar a la función de búsqueda. Cuando se alcanza el final de un camino de búsqueda, se crea un nuevo nodo y se reconstruye todo el camino hasta la raíz. Siempre que sea posible, los nodos hijos existentes se reutilizan. Por lo tanto, la operación de inserción toma tiempo y espacio O(log n).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = TreeSet(1, 2, 3, 4, 5, 6, 7, 8)</span>
<span class="predefined-type">SortedSet</span>&lt;<span class="predefined-type">Integer</span>&gt; ys = xs.add(<span class="integer">5</span>);</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/binarytree2.png?w=660" alt="Árbol Binario 2">
</div>
</div>
<div class="paragraph">
<p>Para mantener las características de rendimiento de un árbol binario de búsqueda, debe mantenerse equilibrado. Todos los caminos desde la raíz hasta una hoja deben tener aproximadamente la misma longitud.</p>
</div>
<div class="paragraph">
<p>En Vavr, implementamos un árbol binario de búsqueda basado en un <a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">Red/Black Tree</a> (<em>Árbol Rojo/Negro</em>). Este utiliza una estrategia de coloración específica para mantener el equilibrio del árbol durante las operaciones de inserción y eliminación. Para obtener más información sobre este tema, se recomienda leer el libro <a href="http://www.amazon.com/Purely-Functional-Structures-Chris-Okasaki/dp/0521663504">Purely Functional Data Structures</a> de Chris Okasaki.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estado_de_las_colecciones">1.5. Estado de las Colecciones</h3>
<div class="paragraph">
<p>En general, estamos observando una convergencia entre los lenguajes de programación. Las características buenas prevalecen, mientras que otras desaparecen. Sin embargo, Java es diferente: está destinado a ser compatible hacia atrás para siempre. Esa es una fortaleza, pero también ralentiza su evolución.</p>
</div>
<div class="paragraph">
<p>Las expresiones lambda acercaron a Java y Scala, pero aún son muy diferentes. Martin Odersky, el creador de Scala, mencionó recientemente en su charla magistral en la <a href="https://www.youtube.com/watch?v=NW5h8d_ZyOs">BDSBTB 2015</a> el estado de las colecciones en Java 8.</p>
</div>
<div class="paragraph">
<p>Describió el <code>Stream</code> de Java como una forma elegante de un iterador. La API de <code>Stream</code> de Java 8 es un ejemplo de una colección <em>elevada</em>. Lo que hace es <em>definir</em> una computación y <em>vincularla</em> a una colección específica en otro paso explícito.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// i + 1</span>
i.prepareForAddition()
 .add(<span class="integer">1</span>)
 .mapBackToInteger(Mappers.toInteger())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Así es como funciona la nueva API de <code>Stream</code> en Java 8. Es una capa computacional encima de las conocidas colecciones de Java.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;] en Java 8</span>
<span class="predefined-type">Arrays</span>.asList(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>)
      .stream()
      .map(<span class="predefined-type">Object</span>::toString)
      .collect(Collectors.toList())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vavr se inspira enormemente en Scala. Así es como debería verse el ejemplo anterior en Java 8.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = Stream(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;) en Vavr</span>
Stream.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>).map(<span class="predefined-type">Object</span>::toString)</code></pre>
</div>
</div>
<div class="paragraph">
<p>En el último año, hemos dedicado mucho esfuerzo a implementar la biblioteca de colecciones de Vavr. Comprende los tipos de colecciones más ampliamente utilizados.</p>
</div>
<div class="sect3">
<h4 id="_seq">1.5.1. Seq</h4>
<div class="paragraph">
<p>Comenzamos nuestro viaje implementando tipos secuenciales. Ya describimos la lista enlazada anteriormente. Luego siguió el <em>Stream</em>, una lista enlazada perezosa (<em>lazy</em>) que nos permite procesar secuencias de elementos posiblemente infinitas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/collections-seq.png?w=660" alt="Seq">
</div>
</div>
<div class="paragraph">
<p>Todas las colecciones son <code>Iterable</code> y, por lo tanto, pueden usarse en bucles <code>for</code> mejorados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">for</span> (<span class="predefined-type">String</span> s : <span class="predefined-type">List</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Advent</span><span class="delimiter">&quot;</span></span>)) {
    <span class="comment">// efectos secundarios y mutación</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Podemos lograr lo mismo internalizando el bucle e inyectando el comportamiento usando una lambda.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Advent</span><span class="delimiter">&quot;</span></span>).forEach(s -&gt; {
    <span class="comment">// efectos secundarios y mutación</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>De todos modos, como vimos anteriormente, preferimos expresiones que devuelvan un valor sobre instrucciones que no devuelven nada. Observando un ejemplo simple, pronto reconoceremos que las instrucciones añaden ruido y separan lo que pertenece junto.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> join(<span class="predefined-type">String</span>... words) {
    <span class="predefined-type">StringBuilder</span> builder = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
    <span class="keyword">for</span>(<span class="predefined-type">String</span> s : words) {
        <span class="keyword">if</span> (builder.length() &gt; <span class="integer">0</span>) {
            builder.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>);
        }
        builder.append(s);
    }
    <span class="keyword">return</span> builder.toString();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Las colecciones de Vavr nos proporcionan muchas funciones para operar sobre los elementos subyacentes. Esto nos permite expresar las cosas de manera muy concisa.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> join(<span class="predefined-type">String</span>... words) {
    <span class="keyword">return</span> <span class="predefined-type">List</span>.of(words)
               .intersperse(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>)
               .foldLeft(<span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>(), <span class="predefined-type">StringBuilder</span>::append)
               .toString();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La mayoría de los objetivos se pueden lograr de diversas maneras usando Vavr. Aquí reducimos todo el cuerpo del método a llamadas de función fluidas en una instancia de List. Incluso podríamos eliminar todo el método y usar directamente nuestra lista para obtener el resultado de la computación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>.of(words).mkString(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>En una aplicación del mundo real, ahora podemos reducir drásticamente el número de líneas de código y, por lo tanto, disminuir el riesgo de errores.</p>
</div>
</div>
<div class="sect3">
<h4 id="_set_y_map">1.5.2. Set y Map</h4>
<div class="paragraph">
<p>Las secuencias son geniales. Pero, para ser completos, una biblioteca de colecciones también necesita diferentes tipos de <code>Set</code> y <code>Map</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/collections-set-map.png?w=660" alt="Set y Map">
</div>
</div>
<div class="paragraph">
<p>Describimos cómo modelar conjuntos ordenados con estructuras de árboles binarios. Un <code>Map</code> ordenado no es más que un <code>Set</code> ordenado que contiene pares clave-valor y que tiene un orden para las claves.</p>
</div>
<div class="paragraph">
<p>La implementación de <code>HashMap</code> se respalda mediante un <a href="http://lampwww.epfl.ch/papers/idealhashtrees.pdf">Hash Array Mapped Trie (HAMT)</a>. En consecuencia, el <code>HashSet</code> está respaldado por un HAMT que contiene pares clave-clave.</p>
</div>
<div class="paragraph">
<p>Nuestro <code>Map</code> no tiene un tipo especial de <code>Entry</code> para representar pares clave-valor. En su lugar, usamos <code>Tuple2</code>, que ya es parte de Vavr. Los campos de un <code>Tuple</code> están enumerados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = (1, &quot;A&quot;)</span>
Tuple2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">String</span>&gt; entry = Tuple.of(<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">Integer</span> key = entry._1;
<span class="predefined-type">String</span> value = entry._2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los Map y Tuple se utilizan ampliamente en Vavr. Los Tuple son esenciales para manejar tipos de retorno con múltiples valores de forma general.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// = HashMap((0, List(2, 4)), (1, List(1, 3)))</span>
<span class="predefined-type">List</span>.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>).groupBy(i -&gt; i % <span class="integer">2</span>);

<span class="comment">// = List((a, 0), (b, 1), (c, 2))</span>
<span class="predefined-type">List</span>.of(<span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">c</span><span class="delimiter">'</span></span>).zipWithIndex();</code></pre>
</div>
</div>
<div class="paragraph">
<p>En Vavr, exploramos y probamos nuestra biblioteca implementando los <a href="https://projecteuler.net/archives">99 problemas de Euler</a>. Es una excelente prueba de concepto. No dudes en enviar solicitudes de <em>pull</em>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comenzando">2. Comenzando</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Los proyectos que incluyan Vavr deben apuntar como mínimo a Java 1.8.</p>
</div>
<div class="paragraph">
<p>El archivo <code>.jar</code> está disponible en <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vavr%22%20a%3A%22vavr%22">Maven Central</a>.</p>
</div>
<div class="sect2">
<h3 id="_gradle">2.1. Gradle</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    compile "io.vavr:vavr:0.10.5"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gradle 7+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    implementation "io.vavr:vavr:0.10.5"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maven">2.2. Maven</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>io.vavr<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>vavr<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>0.10.4<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_independiente">2.3. Independiente</h3>
<div class="paragraph">
<p>Debido a que Vavr <em>no</em> depende de ninguna biblioteca (aparte de la JVM), puedes agregarlo fácilmente como un archivo <code>.jar</code> independiente a tu <em>classpath</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_snapshots">2.4. Snapshots</h3>
<div class="paragraph">
<p>Las versiones en desarrollo se pueden encontrar <a href="https://oss.sonatype.org/content/repositories/snapshots/io/vavr/vavr">aquí</a>.</p>
</div>
<div class="sect3">
<h4 id="_gradle_2">2.4.1. Gradle</h4>
<div class="paragraph">
<p>Agrega el repositorio adicional de snapshots en tu archivo <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">repositories {
    (...)
    maven { url <span class="string"><span class="delimiter">&quot;</span><span class="content">https://oss.sonatype.org/content/repositories/snapshots</span><span class="delimiter">&quot;</span></span> }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_maven_2">2.4.2. Maven</h4>
<div class="paragraph">
<p>Asegúrate de que tu archivo <code>~/.m2/settings.xml</code> contenga lo siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;profiles&gt;</span>
    <span class="tag">&lt;profile&gt;</span>
        <span class="tag">&lt;id&gt;</span>allow-snapshots<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;activation&gt;</span>
            <span class="tag">&lt;activeByDefault&gt;</span>true<span class="tag">&lt;/activeByDefault&gt;</span>
        <span class="tag">&lt;/activation&gt;</span>
        <span class="tag">&lt;repositories&gt;</span>
            <span class="tag">&lt;repository&gt;</span>
                <span class="tag">&lt;id&gt;</span>snapshots-repo<span class="tag">&lt;/id&gt;</span>
                <span class="tag">&lt;url&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/url&gt;</span>
                <span class="tag">&lt;releases&gt;</span>
                    <span class="tag">&lt;enabled&gt;</span>false<span class="tag">&lt;/enabled&gt;</span>
                <span class="tag">&lt;/releases&gt;</span>
                <span class="tag">&lt;snapshots&gt;</span>
                    <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                <span class="tag">&lt;/snapshots&gt;</span>
            <span class="tag">&lt;/repository&gt;</span>
        <span class="tag">&lt;/repositories&gt;</span>
    <span class="tag">&lt;/profile&gt;</span>
<span class="tag">&lt;/profiles&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_guía_de_uso">3. Guía de Uso</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vavr incluye representaciones bien diseñadas de algunos de los tipos más básicos que, aparentemente, faltan o son rudimentarios en Java: <code>Tuple</code>, <code>Value</code> y <code>λ</code>.<br>
En Vavr, todo se construye sobre estos tres bloques básicos:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/vavr-overview.png" alt="Vavr Overview">
</div>
</div>
<div class="sect2">
<h3 id="_tuplas">3.1. Tuplas</h3>
<div class="paragraph">
<p>Java carece de una noción general de tuplas. Una tupla combina un número fijo de elementos para que puedan ser tratados como un todo. A diferencia de un array o lista, una tupla puede contener objetos de diferentes tipos, pero también son inmutables.<br>
Las tuplas tienen tipos como <code>Tuple1</code>, <code>Tuple2</code>, <code>Tuple3</code> y así sucesivamente. Actualmente, hay un límite máximo de 8 elementos. Para acceder a los elementos de una tupla <code>t</code>, puedes usar el método <code>t._1</code> para acceder al primer elemento, <code>t._2</code> para el segundo, y así sucesivamente.</p>
</div>
<div class="sect3">
<h4 id="_crear_una_tupla">3.1.1. Crear una tupla</h4>
<div class="paragraph">
<p>Aquí tienes un ejemplo de cómo crear una tupla que contiene un <code>String</code> y un <code>Integer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// (Java, 8)</span>
Tuple2&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Integer</span>&gt; java8 = Tuple.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>, <span class="integer">8</span>); <i class="conum" data-value="1"></i><b>(1)</b>

<span class="comment">// &quot;Java&quot;</span>
<span class="predefined-type">String</span> s = java8._1; <i class="conum" data-value="2"></i><b>(2)</b>

<span class="comment">// 8</span>
<span class="predefined-type">Integer</span> i = java8._2; <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Se crea una tupla mediante el método de fábrica estático <code>Tuple.of()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Obtén el primer elemento de esta tupla.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Obtén el segundo elemento de esta tupla.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mapear_una_tupla_elemento_por_elemento">3.1.2. Mapear una tupla elemento por elemento</h4>
<div class="paragraph">
<p>El mapeo elemento por elemento evalúa una función por cada elemento de la tupla, devolviendo otra tupla.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// (vavr, 1)</span>
Tuple2&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Integer</span>&gt; that = java8.map(
        s -&gt; s.substring(<span class="integer">2</span>) + <span class="string"><span class="delimiter">&quot;</span><span class="content">vr</span><span class="delimiter">&quot;</span></span>,
        i -&gt; i / <span class="integer">8</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mapear_una_tupla_usando_un_único_mapeador">3.1.3. Mapear una tupla usando un único mapeador</h4>
<div class="paragraph">
<p>También es posible mapear una tupla usando una sola función de mapeo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// (vavr, 1)</span>
Tuple2&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Integer</span>&gt; that = java8.map(
        (s, i) -&gt; Tuple.of(s.substring(<span class="integer">2</span>) + <span class="string"><span class="delimiter">&quot;</span><span class="content">vr</span><span class="delimiter">&quot;</span></span>, i / <span class="integer">8</span>)
);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_transformar_una_tupla">3.1.4. Transformar una tupla</h4>
<div class="paragraph">
<p>La transformación crea un nuevo tipo basado en el contenido de la tupla.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// &quot;vavr 1&quot;</span>
<span class="predefined-type">String</span> that = java8.apply(
        (s, i) -&gt; s.substring(<span class="integer">2</span>) + <span class="string"><span class="delimiter">&quot;</span><span class="content">vr </span><span class="delimiter">&quot;</span></span> + i / <span class="integer">8</span>
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_funciones">3.2. Funciones</h3>
<div class="paragraph">
<p>La programación funcional se centra en los valores y en la transformación de valores mediante funciones. Java 8 solo proporciona una <code>Function</code> que acepta un parámetro y una <code>BiFunction</code> que acepta dos parámetros. Vavr proporciona funciones con un límite de hasta 8 parámetros. Las interfaces funcionales se denominan <code>Function0, Function1, Function2, Function3</code> y así sucesivamente. Si necesitas una función que lance una excepción comprobada, puedes usar <code>CheckedFunction1, CheckedFunction2</code> y así sucesivamente.<br>
La siguiente expresión lambda crea una función para sumar dos enteros:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// sum.apply(1, 2) = 3</span>
Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = (a, b) -&gt; a + b;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto es una abreviatura para la siguiente definición de clase anónima:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = <span class="keyword">new</span> Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt;() {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">Integer</span> apply(<span class="predefined-type">Integer</span> a, <span class="predefined-type">Integer</span> b) {
        <span class="keyword">return</span> a + b;
    }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>También puedes usar el método de fábrica estático  <code>Function3.of(&#8230;&#8203;)</code> para crear una función a partir de cualquier referencia de método.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function3&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>, <span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; function3 =
        Function3.of(<span class="local-variable">this</span>::methodWhichAccepts3Parameters);</code></pre>
</div>
</div>
<div class="paragraph">
<p>De hecho, las interfaces funcionales de Vavr son interfaces funcionales de Java 8 potenciadas. También ofrecen características como:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Composición</p>
</li>
<li>
<p>Elevación (Lifting)</p>
</li>
<li>
<p>Currificación (Currying)</p>
</li>
<li>
<p>Memoización</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_composición">3.2.1. Composición</h4>
<div class="paragraph">
<p>Puedes componer funciones. En matemáticas, la composición de funciones es la aplicación de una función al resultado de otra para producir una tercera función. Por ejemplo, las funciones f : X → Y and g : Y → Z pueden componerse para generar una función <code>h: g(f(x))</code> que mapea X &#8594; Z.<br>
Puedes usar <code>andThen</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; plusOne = a -&gt; a + <span class="integer">1</span>;
Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; multiplyByTwo = a -&gt; a * <span class="integer">2</span>;

Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; add1AndMultiplyBy2 = plusOne.andThen(multiplyByTwo);

then(add1AndMultiplyBy2.apply(<span class="integer">2</span>)).isEqualTo(<span class="integer">6</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>o <code>compose</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; add1AndMultiplyBy2 = multiplyByTwo.compose(plusOne);

then(add1AndMultiplyBy2.apply(<span class="integer">2</span>)).isEqualTo(<span class="integer">6</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_elevación_lifting">3.2.2. Elevación (<em>Lifting</em>)</h4>
<div class="paragraph">
<p>Puedes elevar una función parcial a una función total que devuelve un resultado de tipo <code>Option</code>. El término <em>partial function</em> proviene de las matemáticas. Una función parcial de X a Y es una función <em>f</em>: X′ → Y, para algún subconjunto X′ de X. Generaliza el concepto de una función <em>f</em>: X → Y al no forzar que <em>f</em> asocie cada elemento de X a un elemento de Y. Esto significa que una función parcial funciona correctamente solo para algunos valores de entrada. Si se llama a la función con un valor de entrada no permitido, normalmente lanzará una excepción.</p>
</div>
<div class="paragraph">
<p>El siguiente método <code>divide</code> es una función parcial que solo acepta divisores distintos de cero.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; divide = (a, b) -&gt; a / b;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usamos <code>lift</code> para convertir <code>divide</code> en una función total que está definida para todas las entradas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt; safeDivide = Function2.lift(divide);

<span class="comment">// = None</span>
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt; i1 = safeDivide.apply(<span class="integer">1</span>, <span class="integer">0</span>); <i class="conum" data-value="1"></i><b>(1)</b>

<span class="comment">// = Some(2)</span>
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt; i2 = safeDivide.apply(<span class="integer">4</span>, <span class="integer">2</span>); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Una función elevada devuelve <code>None</code> en lugar de lanzar una excepción, si la función se invoca con valores de entrada no permitidos.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Una función elevada devuelve <code>Some</code>, si la función se invoca con valores de entrada permitidos.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>El siguiente método <code>sum</code> es una función parcial que solo acepta valores de entrada positivos.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">int</span> sum(<span class="type">int</span> first, <span class="type">int</span> second) {
    <span class="keyword">if</span> (first &lt; <span class="integer">0</span> || second &lt; <span class="integer">0</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Only positive integers are allowed</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
    }
    <span class="keyword">return</span> first + second;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La función <code>sum</code> lanza una excepción <code>IllegalArgumentException</code> para valores de entrada negativos.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Podemos elevar el método <code>sum</code> proporcionando la referencia al método.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt;&gt; sum = Function2.lift(<span class="local-variable">this</span>::sum);

<span class="comment">// = None</span>
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">Integer</span>&gt; optionalResult = sum.apply(-<span class="integer">1</span>, <span class="integer">2</span>); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La función elevada captura la excepción <code>IllegalArgumentException</code> y la mapea a <code>None</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_aplicación_parcial">3.2.3. Aplicación Parcial</h4>
<div class="paragraph">
<p>La aplicación parcial te permite derivar una nueva función a partir de una existente fijando algunos valores. Puedes fijar uno o más parámetros, y el número de parámetros fijados define la aridad de la nueva función, de manera que <code>new arity = (original arity - fixed parameters)</code>. Los parámetros se asignan de izquierda a derecha.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = (a, b) -&gt; a + b;
Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; add2 = sum.apply(<span class="integer">2</span>); <i class="conum" data-value="1"></i><b>(1)</b>

then(add2.apply(<span class="integer">4</span>)).isEqualTo(<span class="integer">6</span>);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>El primer parámetro <code>a</code> se fija al valor 2.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Esto puede demostrarse fijando los primeros tres parámetros de una <code>Function5</code>, lo que resulta en una <code>Function2</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function5&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = (a, b, c, d, e) -&gt; a + b + c + d + e;
Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; add6 = sum.apply(<span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">1</span>); <i class="conum" data-value="1"></i><b>(1)</b>

then(add6.apply(<span class="integer">4</span>, <span class="integer">3</span>)).isEqualTo(<span class="integer">13</span>);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Los parámetros <code>a</code>, <code>b</code> y <code>c</code> se fijan a los valores 2, 3 y 1, respectivamente.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La aplicación parcial difiere de la <a href="#_currificación_currying">Currificación (Currying)</a>, como se explorará en la sección correspondiente.</p>
</div>
</div>
<div class="sect3">
<h4 id="_currificación_currying">3.2.4. Currificación (Currying)</h4>
<div class="paragraph">
<p>La currificación es una técnica que permite aplicar parcialmente una función fijando un valor para uno de los parámetros, lo que da como resultado una función <code>Function1</code> que devuelve otra función <code>Function1</code>.</p>
</div>
<div class="paragraph">
<p>Cuando una <code>Function2</code> es <em>curried</em>, el resultado es indistinguible de la <em>aplicación parcial</em> de una <code>Function2</code> ya que ambas producen una función de aridad 1.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function2&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = (a, b) -&gt; a + b;
Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; add2 = sum.curried().apply(<span class="integer">2</span>); <i class="conum" data-value="1"></i><b>(1)</b>

then(add2.apply(<span class="integer">4</span>)).isEqualTo(<span class="integer">6</span>);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>El primer parámetro <code>a</code> se fija al valor 2.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Podrás notar que, aparte del uso de <code>.curried()</code>, este código es idéntico al ejemplo de aridad 2 dado en <a href="#_aplicación_parcial">Aplicación Parcial</a>. Con funciones de mayor aridad, la diferencia se vuelve evidente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function3&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt; sum = (a, b, c) -&gt; a + b + c;
<span class="directive">final</span> Function1&lt;<span class="predefined-type">Integer</span>, Function1&lt;<span class="predefined-type">Integer</span>, <span class="predefined-type">Integer</span>&gt;&gt; add2 = sum.curried().apply(<span class="integer">2</span>);<i class="conum" data-value="1"></i><b>(1)</b>

then(add2.apply(<span class="integer">4</span>).apply(<span class="integer">3</span>)).isEqualTo(<span class="integer">9</span>);<i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Nota la presencia de funciones adicionales en los parámetros.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Las llamadas posteriores a <code>apply</code> devuelven otra <code>Function1</code>, excepto en la llamada final.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_memoización">3.2.5. Memoización</h4>
<div class="paragraph">
<p>La memoización es una forma de almacenamiento en caché. Una función memoizada se ejecuta solo una vez y luego devuelve el resultado desde una caché.<br>
El siguiente ejemplo calcula un número aleatorio en la primera invocación y devuelve el número almacenado en caché en la segunda invocación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Function0&lt;<span class="predefined-type">Double</span>&gt; hashCache =
        Function0.of(<span class="predefined-type">Math</span>::random).memoized();

<span class="type">double</span> randomValue1 = hashCache.apply();
<span class="type">double</span> randomValue2 = hashCache.apply();

then(randomValue1).isEqualTo(randomValue2);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_values">3.3. Values</h3>
<div class="paragraph">
<p>En un entorno funcional, vemos un valor como una especie de <a href="https://en.wikipedia.org/wiki/Normal_form_(abstract_rewriting)">forma normal</a>, una expresión que no puede evaluarse más. En Java, expresamos esto haciendo que el estado de un objeto sea <code>final</code> y lo llamamos <a href="https://en.wikipedia.org/wiki/Immutable_object">objeto immutable</a>.<br>
El valor funcional de Vavr abstrae sobre objetos inmutables. Las operaciones de escritura eficientes se logran compartiendo memoria inmutable entre instancias. ¡Esto nos proporciona seguridad en hilos automáticamente!</p>
</div>
<div class="sect3">
<h4 id="_option">3.3.1. Option</h4>
<div class="paragraph">
<p><code>Option</code> es un tipo de contenedor monádico que representa un valor opcional. Las instancias de <code>Option</code> son ya sea una instancia de <code>Some</code> o <code>None</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// optional *value*, no more nulls</span>
<span class="predefined-type">Option</span>&lt;T&gt; option = <span class="predefined-type">Option</span>.of(...);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vienes a Vavr después de usar la clase <code>Optional</code> de Java, hay una diferencia crucial. En <code>Optional</code>, una llamada a <code>.map</code> que resulta en un valor <code>null</code> producirá un <code>Optional</code> vacío. En Vavr, esto generaría un <code>Some(null)</code>, lo que podría llevar a un <code>NullPointerException</code>.</p>
</div>
<div class="paragraph">
<p>Usando <code>Optional</code>, este escenario es válido.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Optional&lt;<span class="predefined-type">String</span>&gt; maybeFoo = Optional.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
then(maybeFoo.get()).isEqualTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>);
Optional&lt;<span class="predefined-type">String</span>&gt; maybeFooBar = maybeFoo.map(s -&gt; (<span class="predefined-type">String</span>)<span class="predefined-constant">null</span>)  <i class="conum" data-value="2"></i><b>(2)</b>
                                       .map(s -&gt; s.toUpperCase() + <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>);
then(maybeFooBar.isPresent()).isFalse();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La opción es <code>Some("foo")</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La opción resultante se vuelve vacía aquí.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Usando la <code>Option</code> de Vavr, el mismo escenario resultará en un <code>NullPointerException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; maybeFoo = <span class="predefined-type">Option</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
then(maybeFoo.get()).isEqualTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>);
<span class="keyword">try</span> {
    maybeFoo.map(s -&gt; (<span class="predefined-type">String</span>)<span class="predefined-constant">null</span>) <i class="conum" data-value="2"></i><b>(2)</b>
            .map(s -&gt; s.toUpperCase() + <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="3"></i><b>(3)</b>
    Assert.fail();
} <span class="keyword">catch</span> (<span class="exception">NullPointerException</span> e) {
    <span class="comment">// this is clearly not the correct approach</span>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La opción es <code>Some("foo")</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La opción resultante es <code>Some(null)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>TLa llamada a <code>s.toUpperCase()</code> se invoca sobre un <code>null</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Esto puede parecer que la implementación de Vavr está rota, pero en realidad no lo está. Más bien, se adhiere al requisito de una mónada (<em>monad</em>) de mantener el contexto computacional al llamar a <code>.map</code>.  En términos de una <code>Option</code>, esto significa que llamar a <code>.map</code> en un <code>Some</code> dará como resultado un <code>Some</code> y llamar a <code>.map</code> en un <code>None</code> dará como resultado un <code>None</code>.  En el ejemplo de <code>Optional</code> de Java mencionado anteriormente, ese contexto cambió de un <code>Some</code> a un <code>None</code>.</p>
</div>
<div class="paragraph">
<p>Esto puede parecer que hace que <code>Option</code> sea inútil, pero en realidad te obliga a prestar atención a las posibles ocurrencias de <code>null</code> y a manejarlas adecuadamente en lugar de aceptarlas sin saberlo. La forma correcta de manejar las ocurrencias de <code>null</code> es usar <code>flatMap</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; maybeFoo = <span class="predefined-type">Option</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
then(maybeFoo.get()).isEqualTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; maybeFooBar = maybeFoo.map(s -&gt; (<span class="predefined-type">String</span>)<span class="predefined-constant">null</span>) <i class="conum" data-value="2"></i><b>(2)</b>
                                     .flatMap(s -&gt; <span class="predefined-type">Option</span>.of(s) <i class="conum" data-value="3"></i><b>(3)</b>
                                                         .map(t -&gt; t.toUpperCase() + <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>));
then(maybeFooBar.isEmpty()).isTrue();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La opción es <code>Some("foo")</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La opción resultante es <code>Some(null)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>s</code>, que es <code>null</code>, se convierte en <code>None</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alternativamente, mueve el <code>.flatMap</code> para que esté ubicado junto al valor que posiblemente sea <code>null</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; maybeFoo = <span class="predefined-type">Option</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
then(maybeFoo.get()).isEqualTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; maybeFooBar = maybeFoo.flatMap(s -&gt; <span class="predefined-type">Option</span>.of((<span class="predefined-type">String</span>)<span class="predefined-constant">null</span>)) <i class="conum" data-value="2"></i><b>(2)</b>
                                     .map(s -&gt; s.toUpperCase() + <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>);
then(maybeFooBar.isEmpty()).isTrue();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La opción es <code>Some("foo")</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La opción resultante es <code>None</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Esto se explora en más detalle en el <a href="http://blog.vavr.io/the-agonizing-death-of-an-astronaut/">blog de Vavr</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_try">3.3.2. Try</h4>
<div class="paragraph">
<p><code>Try</code> es un tipo de contenedor monádico que representa una computación que puede resultar en una excepción o devolver un valor calculado exitosamente. Es similar a <code>Either</code>, pero semánticamente diferente. Una instancia de <code>Try</code> puede ser una instancia de <code>Success</code> o <code>Failure</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// no need to handle exceptions</span>
Try.of(() -&gt; bunchOfWork()).getOrElse(other);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.vavr.API</span>.*;        <span class="comment">// $, Case, Match</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.vavr.Predicates</span>.*; <span class="comment">// instanceOf</span>

A result = Try.of(<span class="local-variable">this</span>::bunchOfWork)
    .recover(x -&gt; Match(x).of(
        Case(<span class="error">$</span>(instanceOf(Exception_1.class)), t -&gt; somethingWithException(t)),
        Case(<span class="error">$</span>(instanceOf(Exception_2.class)), t -&gt; somethingWithException(t)),
        Case(<span class="error">$</span>(instanceOf(Exception_n.class)), t -&gt; somethingWithException(t))
    ))
    .getOrElse(other);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lazy">3.3.3. Lazy</h4>
<div class="paragraph">
<p><code>Lazy</code> es un tipo de contenedor monádico que representa un valor evaluado de forma perezosa (<em>lazy</em>). En comparación con un <code>Supplier</code>, <code>Lazy</code> realiza <em>memoización</em>, es decir, se evalúa solo una vez y, por lo tanto, es referencialmente transparente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Lazy&lt;<span class="predefined-type">Double</span>&gt; lazy = Lazy.of(<span class="predefined-type">Math</span>::random);
lazy.isEvaluated(); <span class="comment">// = false</span>
lazy.get();         <span class="comment">// = 0.123 (random generated)</span>
lazy.isEvaluated(); <span class="comment">// = true</span>
lazy.get();         <span class="comment">// = 0.123 (memoized)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>También puedes crear un valor realmente perezoso (<em>lazy</em>) (<em>esto solo funciona con interfaces</em>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">CharSequence</span> chars = Lazy.val(() -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Yay!</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">CharSequence</span>.class);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_either">3.3.4. Either</h4>
<div class="paragraph">
<p><code>Either</code> representa un valor de dos tipos posibles. Un <code>Either</code> es, o bien un <code>Left</code>, o bien un <code>Right</code>. Si un <code>Either</code> dado es un <code>Right</code> y se proyecta a un <code>Left</code>, las operaciones de <code>Left</code> no tienen efecto sobre el valor de <code>Right</code>. Si un <code>Either</code> dado es un <code>Left</code> y se proyecta a un <code>Right</code>, las operaciones de <code>Right</code> no tienen efecto sobre el valor de <code>Left</code>. Si un <code>Left</code> se proyecta a un <code>Left</code>, o un <code>Right</code> se proyecta a un <code>Right</code>, las operaciones sí tienen efecto.</p>
</div>
<div class="paragraph">
<p>Ejemplo: Una función <code>compute()</code>, que da como resultado un valor de tipo <code>Integer</code> (en el caso de éxito) o un mensaje de error de tipo <code>String</code> (en el caso de fallo). Por convención, el caso de éxito es <code>Right</code> y el de fallo es <code>Left</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Either&lt;<span class="predefined-type">String</span>,<span class="predefined-type">Integer</span>&gt; value = compute().right().map(i -&gt; i * <span class="integer">2</span>).toEither();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si el resultado de <code>compute()</code> es <code>Right(1)</code>, el valor es <code>Right(2)</code>.<br>
Si el resultado de <code>compute()</code> es <code>Left("error")</code>, el valor es <code>Left("error")</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_future">3.3.5. Future</h4>
<div class="paragraph">
<p>Un <code>Future</code> es el resultado de una computación que estará disponible en algún momento. Todas las operaciones proporcionadas son <em>no bloqueantes</em>. El <code>ExecutorService</code> subyacente se utiliza para ejecutar controladores asíncronos, por ejemplo, mediante <code>onComplete(&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>Un <code>Future</code> tiene dos estados: <em>pendiente</em> y <em>completado</em>.</p>
</div>
<div class="paragraph">
<p><strong>Pendiente:</strong> La computación está en curso. Solo un <code>Future</code> pendiente puede completarse o cancelarse.</p>
</div>
<div class="paragraph">
<p><strong>Completado:</strong> La computación finalizó exitosamente con un resultado, falló con una excepción o fue cancelada.</p>
</div>
<div class="paragraph">
<p>Los <em>callbacks</em> pueden registrarse en un <code>Future</code> en cualquier momento. Estas acciones se ejecutan tan pronto como el <code>Future</code> se completa. Una acción registrada en un <code>Future</code> completado se ejecuta inmediatamente. La acción puede ejecutarse en un hilo separado, dependiendo del <code>ExecutorService</code> subyacente. Las acciones registradas en un <code>Future</code> cancelado se ejecutan con el resultado fallido.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// future *value*, result of an async calculation</span>
<span class="predefined-type">Future</span>&lt;T&gt; future = <span class="predefined-type">Future</span>.of(...);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validación_validation">3.3.6. Validación (Validation)</h4>
<div class="paragraph">
<p>El control de validación (<em>Validation</em>) es un <em>funtor aplicativo</em> que facilita la acumulación de errores. Al intentar componer mónadas, el proceso de combinación se detendrá en el primer error encontrado. Sin embargo, <code>Validation</code> continuará procesando las funciones de combinación, acumulando todos los errores. Esto es especialmente útil al validar múltiples campos, como un formulario web, cuando deseas conocer todos los errores encontrados en lugar de uno por uno.</p>
</div>
<div class="paragraph">
<p>Ejemplo: Obtenemos los campos <code>name</code> y <code>age</code> de un formulario web y queremos crear una instancia válida de <code>Person</code>, o devolver la lista de errores de validación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">PersonValidator personValidator = <span class="keyword">new</span> PersonValidator();

<span class="comment">// Valid(Person(John Doe, 30))</span>
Validation&lt;Seq&lt;<span class="predefined-type">String</span>&gt;, Person&gt; valid = personValidator.validatePerson(<span class="string"><span class="delimiter">&quot;</span><span class="content">John Doe</span><span class="delimiter">&quot;</span></span>, <span class="integer">30</span>);

<span class="comment">// Invalid(List(Name contains invalid characters: '!4?', Age must be greater than 0))</span>
Validation&lt;Seq&lt;<span class="predefined-type">String</span>&gt;, Person&gt; invalid = personValidator.validatePerson(<span class="string"><span class="delimiter">&quot;</span><span class="content">John? Doe!4</span><span class="delimiter">&quot;</span></span>, -<span class="integer">1</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Un valor válido está contenido en una instancia de <code>Validation.Valid</code>, mientras que una lista de errores de validación está contenida en una instancia de <code>Validation.Invalid</code>.</p>
</div>
<div class="paragraph">
<p>El siguiente validador se utiliza para combinar diferentes resultados de validación en una sola instancia de <code>Validation</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class PersonValidator {

    private static final String VALID_NAME_CHARS = "[a-zA-Z ]";
    private static final int MIN_AGE = 0;

    public Validation&lt;Seq&lt;String&gt;, Person&gt; validatePerson(String name, int age) {
        return Validation.combine(validateName(name), validateAge(age)).ap(Person::new);
    }

    private Validation&lt;String, String&gt; validateName(String name) {
        return CharSeq.of(name).replaceAll(VALID_NAME_CHARS, "").transform(seq -&gt; seq.isEmpty()
                ? Validation.valid(name)
                : Validation.invalid("Name contains invalid characters: '"
                + seq.distinct().sorted() + "'"));
    }

    private Validation&lt;String, Integer&gt; validateAge(int age) {
        return age &lt; MIN_AGE
                ? Validation.invalid("Age must be at least " + MIN_AGE)
                : Validation.valid(age);
    }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Si la validación tiene éxito, es decir, si los datos de entrada son válidos, entonces se crea una instancia de <code>Person</code> con los campos <code>name</code> y <code>age</code> proporcionados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>class Person {

    public final String name;
    public final int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return "Person(" + name + ", " + age + ")";
    }

}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_colecciones">3.4. Colecciones</h3>
<div class="paragraph">
<p>Se ha dedicado mucho esfuerzo a diseñar una biblioteca de colecciones completamente nueva para Java que cumpla con los requisitos de la programación funcional, especialmente la inmutabilidad.</p>
</div>
<div class="paragraph">
<p>El <code>Stream</code> de Java eleva una computación a una capa diferente y se vincula a una colección específica en otro paso explícito. Con Vavr, no necesitamos todo este código adicional repetitivo (<em>boilerplate</em>).</p>
</div>
<div class="paragraph">
<p>Las nuevas colecciones están basadas en <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html">java.lang.Iterable</a>, lo que permite aprovechar un estilo de iteración simplificado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// 1000 random numbers</span>
<span class="keyword">for</span> (<span class="type">double</span> random : Stream.continually(<span class="predefined-type">Math</span>::random).take(<span class="integer">1000</span>)) {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>TraversableOnce</code> tiene una gran cantidad de funciones útiles para operar en la colección. Su API es similar a <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">java.util.stream.Stream</a>, pero es más madura.</p>
</div>
<div class="sect3">
<h4 id="_list">3.4.1. List</h4>
<div class="paragraph">
<p>La <code>List</code> de Vavr es una lista enlazada inmutable. Las mutaciones crean nuevas instancias. La mayoría de las operaciones se realizan en tiempo lineal. Las operaciones consecutivas se ejecutan una por una.</p>
</div>
<div class="sect4">
<h5 id="_java_8">Java 8</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Arrays</span>.asList(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>).stream().reduce((i, j) -&gt; i + j);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">IntStream.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>).sum();</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_vavr">Vavr</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// io.vavr.collection.List</span>
<span class="predefined-type">List</span>.of(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>).sum();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_stream">3.4.2. Stream</h4>
<div class="paragraph">
<p>La implementación de <code>io.vavr.collection.Stream</code> es una lista enlazada perezosa (lazy). Los valores se calculan solo cuando se necesitan. Debido a su naturaleza perezosa, la mayoría de las operaciones se realizan en tiempo constante. En general, las operaciones son intermedias y se ejecutan en una sola pasada.</p>
</div>
<div class="paragraph">
<p>Lo sorprendente de los streams es que podemos usarlos para representar secuencias que son (teóricamente) infinitamente largas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// 2, 4, 6, ...</span>
Stream.from(<span class="integer">1</span>).filter(i -&gt; i % <span class="integer">2</span> == <span class="integer">0</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_características_de_rendimiento">3.4.3. Características de Rendimiento</h4>
<table class="tableblock frame-topbot grid-all stretch">
<caption class="title">Table 1. Complejidad Temporal de las Operaciones Secuenciales</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">head()</th>
<th class="tableblock halign-left valign-top">tail()</th>
<th class="tableblock halign-left valign-top">get(int)</th>
<th class="tableblock halign-left valign-top">update(int, T)</th>
<th class="tableblock halign-left valign-top">prepend(T)</th>
<th class="tableblock halign-left valign-top">append(T)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CharSeq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Iterator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Queue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>a</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PriorityQueue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&mdash;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>lazy</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>lazy</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const <sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const <sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const <sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const <sup>eff</sup></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-topbot grid-all stretch">
<caption class="title">Table 2. Complejidad Temporal de las Operaciones en Map/Set</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">contains/Key</th>
<th class="tableblock halign-left valign-top">add/put</th>
<th class="tableblock halign-left valign-top">remove</th>
<th class="tableblock halign-left valign-top">min</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HashMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HashSet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LinkedHashMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LinkedHashSet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">const<sup>eff</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">linear</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tree       </p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TreeMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TreeSet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Leyenda:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>const &mdash; tiempo constante.</p>
</li>
<li>
<p>const<sup>a</sup> &mdash; tiempo constante amortizado, algunas operaciones pueden tomar más tiempo.</p>
</li>
<li>
<p>const<sup>eff</sup> &mdash; tiempo efectivamente constante, dependiendo de suposiciones como la distribución de claves hash.</p>
</li>
<li>
<p>const<sup>lazy</sup> &mdash; tiempo constante perezoso (<em>lazy</em>), la operación se difiere.</p>
</li>
<li>
<p>log &mdash; tiempo logarítmico.</p>
</li>
<li>
<p>linear &mdash; tiempo lineal.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verificación_de_propiedades">3.5. Verificación de Propiedades</h3>
<div class="paragraph">
<p>La verificación de propiedades (también conocida como  <a href="http://en.wikipedia.org/wiki/Property_testing">pruebas de propiedades</a>) es una forma realmente poderosa de probar propiedades de nuestro código de manera funcional. Se basa en la generación de datos aleatorios, que se pasan a una función de verificación definida por el usuario.</p>
</div>
<div class="paragraph">
<p>Vavr admite pruebas de propiedades en su módulo <code>io.vavr:vavr-test</code>, por lo que asegúrate de incluirlo para usarlo en tus pruebas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Arbitrary&lt;<span class="predefined-type">Integer</span>&gt; ints = Arbitrary.integer();

<span class="comment">// square(int) &gt;= 0: OK, passed 1000 tests.</span>
Property.def(<span class="string"><span class="delimiter">&quot;</span><span class="content">square(int) &gt;= 0</span><span class="delimiter">&quot;</span></span>)
        .forAll(ints)
        .suchThat(i -&gt; i * i &gt;= <span class="integer">0</span>)
        .check()
        .assertIsSatisfied();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los generadores de estructuras de datos complejas se componen de generadores simples.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pattern_matching">3.6. Pattern Matching</h3>
<div class="paragraph">
<p>SScala tiene coincidencia de patrones (<em>pattern matching</em>) nativa, una de las ventajas sobre el Java <em><strong>puro</strong></em>. The basic syntax is close to Java&#8217;sLa sintaxis básica es similar al <code>switch</code> de Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">val s = i match {
  <span class="keyword">case</span> <span class="integer">1</span> =&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">one</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">case</span> <span class="integer">2</span> =&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>
  <span class="keyword">case</span> _ =&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notablemente, <em>match</em> es una expresión, lo que significa que produce un resultado. Además, ofrece:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parámetros nombrados: <code>case i: Int &#8658; "Int " + i</code></p>
</li>
<li>
<p>Desestructuración de objetos: <code>case Some(i) &#8658; i</code></p>
</li>
<li>
<p>Condiciones de guarda (guards): <code>case Some(i) if i &gt; 0 &#8658; "positive " + i</code></p>
</li>
<li>
<p>Múltiples condiciones: <code>case "-h" | "--help" &#8658; displayHelp</code></p>
</li>
<li>
<p>Verificaciones en tiempo de compilación para exhaustividad</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El <em><strong>Pattern matching</strong></em> es una gran característica que nos ahorra escribir cadenas de ramas <code>if-then-else</code>. Reduce la cantidad de código mientras se enfoca en las partes relevantes.</p>
</div>
<div class="sect3">
<h4 id="_fundamentos_de_match_para_java">3.6.1. Fundamentos de Match para Java</h4>
<div class="paragraph">
<p>Vavr proporciona una API de coincidencia (<em>match</em>) que es similar a la de Scala. Se habilita agregando el siguiente import a nuestra aplicación:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.vavr.API</span>.*;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Teniendo los métodos estáticos <em>Match</em>, <em>Case</em> y los <em>patrones atómicos (</em>atomic patterns<em>)</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$()</code> - patrón comodín (<em>wildcard</em>)</p>
</li>
<li>
<p><code>$(value)</code> - patrón de igualdad</p>
</li>
<li>
<p><code>$(predicate)</code> - patrón condicional</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>En el alcance, el ejemplo inicial de Scala puede expresarse de esta manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> s = Match(i).of(
    Case(<span class="error">$</span>(<span class="integer">1</span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">one</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>(<span class="integer">2</span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>(), <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>⚡ Usamos nombres de métodos en mayúsculas uniformes porque 'case' es una palabra clave en Java. Esto hace que la API sea especial.</p>
</div>
<div class="sect4">
<h5 id="_exhaustividad_exhaustiveness">Exhaustividad (<em>Exhaustiveness</em>)</h5>
<div class="paragraph">
<p>El último patrón comodín (<em>wildcard</em>) <code>$()</code> nos protege de un <code>MatchError</code>, que se lanza si ningún caso coincide.</p>
</div>
<div class="paragraph">
<p>Debido a que no podemos realizar verificaciones de exhaustividad como lo hace el compilador de Scala, ofrecemos la posibilidad de devolver un resultado opcional:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Option</span>&lt;<span class="predefined-type">String</span>&gt; s = Match(i).option(
    Case(<span class="error">$</span>(<span class="integer">0</span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">zero</span><span class="delimiter">&quot;</span></span>)
);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_syntactic_sugar_azúcar_sintáctico">Syntactic Sugar (<em>Azúcar Sintáctico</em>)</h5>
<div class="paragraph">
<p>Como se mostró anteriormente, <code>Case</code> permite coincidir con patrones condicionales.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Case(<span class="error">$</span>(predicate), ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vavr ofrece un conjunto de predicados predeterminados.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.vavr.Predicates</span>.*;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Estos pueden usarse para expresar el ejemplo inicial de Scala de la siguiente manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> s = Match(i).of(
    Case(<span class="error">$</span>(is(<span class="integer">1</span>)), <span class="string"><span class="delimiter">&quot;</span><span class="content">one</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>(is(<span class="integer">2</span>)), <span class="string"><span class="delimiter">&quot;</span><span class="content">two</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>(), <span class="string"><span class="delimiter">&quot;</span><span class="content">?</span><span class="delimiter">&quot;</span></span>)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Condiciones Múltiples</strong></p>
</div>
<div class="paragraph">
<p>Usamos el predicado <code>isIn</code> para verificar múltiples condiciones:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Case(<span class="error">$</span>(isIn(<span class="string"><span class="delimiter">&quot;</span><span class="content">-h</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--help</span><span class="delimiter">&quot;</span></span>)), ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Realizando Efectos Secundarios</strong></p>
</div>
<div class="paragraph">
<p><code>Match</code> actúa como una expresión y produce un valor. Para realizar efectos secundarios (<em>side-effects</em>), necesitamos usar la función auxiliar <code>run</code> que devuelve <code>Void</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Match(arg).of(
    Case(<span class="error">$</span>(isIn(<span class="string"><span class="delimiter">&quot;</span><span class="content">-h</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--help</span><span class="delimiter">&quot;</span></span>)), o -&gt; run(<span class="local-variable">this</span>::displayHelp)),
    Case(<span class="error">$</span>(isIn(<span class="string"><span class="delimiter">&quot;</span><span class="content">-v</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--version</span><span class="delimiter">&quot;</span></span>)), o -&gt; run(<span class="local-variable">this</span>::displayVersion)),
    Case(<span class="error">$</span>(), o -&gt; run(() -&gt; {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(arg);
    }))
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>⚡ <code>run</code> se utiliza para evitar ambigüedades y porque <code>void</code> no es un valor de retorno válido en Java.</p>
</div>
<div class="paragraph">
<p><strong>Precaución:</strong> <code>run</code> no debe usarse como valor de retorno directo, es decir, fuera del cuerpo de una lambda:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Incorrecto</span>
Case(<span class="error">$</span>(isIn(<span class="string"><span class="delimiter">&quot;</span><span class="content">-h</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--help</span><span class="delimiter">&quot;</span></span>)), run(<span class="local-variable">this</span>::displayHelp))</code></pre>
</div>
</div>
<div class="paragraph">
<p>De lo contrario, los <code>Case</code> se evaluarán de forma anticipada <em>antes</em> de que los patrones sean comparados, lo que rompe toda la expresión <code>Match</code>. En su lugar, se debe usar dentro del cuerpo de una lambda:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Correcto</span>
Case(<span class="error">$</span>(isIn(<span class="string"><span class="delimiter">&quot;</span><span class="content">-h</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">--help</span><span class="delimiter">&quot;</span></span>)), o -&gt; run(<span class="local-variable">this</span>::displayHelp))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Como podemos ver, <code>run</code> es propenso a errores si no se usa correctamente. Ten cuidado. Estamos considerando marcarlo como obsoleto en una versión futura y, tal vez, proporcionar una mejor API para realizar efectos secundarios.</p>
</div>
</div>
<div class="sect4">
<h5 id="_parámetros_nombrados">Parámetros Nombrados</h5>
<div class="paragraph">
<p>Vavr aprovecha las lambdas para proporcionar parámetros nombrados para los valores coincidentes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Number</span> plusOne = Match(obj).of(
    Case(<span class="error">$</span>(instanceOf(<span class="predefined-type">Integer</span>.class)), i -&gt; i + <span class="integer">1</span>),
    Case(<span class="error">$</span>(instanceOf(<span class="predefined-type">Double</span>.class)), d -&gt; d + <span class="integer">1</span>),
    Case(<span class="error">$</span>(), o -&gt; { <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">NumberFormatException</span>(); })
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hasta ahora, hemos coincidido valores directamente utilizando patrones atómicos. Si un patrón atómico coincide, el tipo correcto del objeto coincidente se infiere del contexto del patrón.</p>
</div>
<div class="paragraph">
<p>A continuación, exploraremos patrones recursivos que pueden coincidir con gráficos de objetos de profundidad (teóricamente) arbitraria.</p>
</div>
</div>
<div class="sect4">
<h5 id="_descomposición_de_objetos">Descomposición de Objetos</h5>
<div class="paragraph">
<p>En Java usamos constructores para instanciar clases. Entendemos la <em>descomposición de objetos</em> como la destrucción de objetos en sus partes.</p>
</div>
<div class="paragraph">
<p>Mientras que un constructor es una <em>función</em> que se <em>aplica</em> a los argumentos y devuelve una nueva instancia, un deconstructor es una función que toma una instancia y devuelve sus partes. Decimos que un objeto está <em>descompuesto</em>.</p>
</div>
<div class="paragraph">
<p>La destrucción de objetos no necesariamente es una operación única. Por ejemplo, un <code>LocalDate</code> puede descomponerse en:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Los componentes de año, mes y día.</p>
</li>
<li>
<p>El valor <code>long</code> que representa los milisegundos desde la época de un <code>Instant</code> correspondiente.</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_patrones">3.6.2. Patrones</h4>
<div class="paragraph">
<p>En Vavr usamos patrones para definir cómo se deconstruye una instancia de un tipo específico. Estos patrones pueden usarse junto con la API de coincidencia (<code>Match</code>).</p>
</div>
<div class="sect4">
<h5 id="_patrones_predefinidos">Patrones Predefinidos</h5>
<div class="paragraph">
<p>Para muchos tipos de Vavr ya existen patrones de coincidencia predefinidos. Estos se importan mediante</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.vavr.Patterns</span>.*;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por ejemplo, ahora podemos coincidir con el resultado de un <code>Try</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Match(_try).of(
    Case(<span class="error">$</span>Success(<span class="error">$</span>()), value -&gt; ...),
    Case(<span class="error">$</span>Failure(<span class="error">$</span>()), x -&gt; ...)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>⚡ Un primer prototipo de la API de coincidencia (<code>Match</code>) de Vavr permitía extraer una selección definida por el usuario de objetos a partir de un patrón de coincidencia. Sin el soporte adecuado del compilador, esto no es práctico porque el número de métodos generados crecía exponencialmente. La API actual hace un compromiso: todos los patrones se coinciden, pero solo los patrones raíz son <em>descompuestos</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Match(_try).of(
    Case(<span class="error">$</span>Success(<span class="error">$</span>Tuple2(<span class="error">$</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>), <span class="error">$</span>())), tuple2 -&gt; ...),
    Case(<span class="error">$</span>Failure(<span class="error">$</span>(instanceOf(<span class="exception">Error</span>.class))), error -&gt; ...)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aquí los patrones raíz son <code>Success</code> y <code>Failure</code>. Estos se descomponen en <code>Tuple2</code> y <code>Error</code>, teniendo los tipos genéricos correctos.</p>
</div>
<div class="paragraph">
<p>⚡ Los tipos profundamente anidados se infieren según el argumento de <code>Match</code> y <em><strong>not</strong></em> según los patrones coincidentes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_patrones_definidos_por_el_usuario">Patrones Definidos por el Usuario</h5>
<div class="paragraph">
<p>Es esencial poder descomponer objetos arbitrarios, incluidas las instancias de clases finales. Vavr hace esto de forma declarativa al proporcionar las anotaciones en tiempo de compilación <code>@Patterns</code> y <code>@Unapply</code>.</p>
</div>
<div class="paragraph">
<p>Para habilitar el procesador de anotaciones, el artefacto <a href="http://search.maven.org/#search%7Cga%7C1%7Cvavr-match">vavr-match</a> debe añadirse como dependencia del proyecto.</p>
</div>
<div class="paragraph">
<p>⚡ Nota: Por supuesto, los patrones pueden implementarse directamente sin usar el generador de código. Para más información, consulta el código fuente generado.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">io.vavr.match.annotation</span>.*;

<span class="annotation">@Patterns</span>
<span class="type">class</span> <span class="class">My</span> {

    <span class="annotation">@Unapply</span>
    <span class="directive">static</span> &lt;T&gt; Tuple1&lt;T&gt; Optional(java.util.Optional&lt;T&gt; optional) {
        <span class="keyword">return</span> Tuple.of(optional.orElse(<span class="predefined-constant">null</span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>El procesador de anotaciones coloca un archivo <code>MyPatterns</code> en el mismo paquete (por defecto en <code>target/generated-sources</code>). También se admiten clases internas. Caso especial: si el nombre de la clase es <code>$</code>, el nombre de la clase generada será simplemente <code>Patterns</code>, sin prefijo.</p>
</div>
</div>
<div class="sect4">
<h5 id="_guardas_guards">Guardas (<em>Guards</em>)</h5>
<div class="paragraph">
<p>Ahora podemos coincidir con objetos <code>Optionals</code> utilizando <em>guards</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Match(optional).of(
    Case(<span class="error">$</span>Optional(<span class="error">$</span>(v -&gt; v != <span class="predefined-constant">null</span>)), <span class="string"><span class="delimiter">&quot;</span><span class="content">defined</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>Optional(<span class="error">$</span>(v -&gt; v == <span class="predefined-constant">null</span>)), <span class="string"><span class="delimiter">&quot;</span><span class="content">empty</span><span class="delimiter">&quot;</span></span>)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Los predicados podrían simplificarse implementando <code>isNull</code> y <code>isNotNull</code>.</p>
</div>
<div class="paragraph">
<p>⚡ ¡Y sí, extraer un <code>null</code> es extraño! En lugar de usar el <code>Optional</code> de Java, prueba con la <code>Option</code> de Vavr.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Match(option).of(
    Case(<span class="error">$</span>Some(<span class="error">$</span>()), <span class="string"><span class="delimiter">&quot;</span><span class="content">defined</span><span class="delimiter">&quot;</span></span>),
    Case(<span class="error">$</span>None(), <span class="string"><span class="delimiter">&quot;</span><span class="content">empty</span><span class="delimiter">&quot;</span></span>)
);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">4. License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright 2014-2018 Vavr, <a href="http://vavr.io" class="bare">http://vavr.io</a></p>
</div>
<div class="paragraph">
<p>Licenciado bajo la Licencia Apache, Versión 2.0 (la "Licencia");<br>
no puedes usar este archivo excepto en cumplimiento con la Licencia.<br>
Puedes obtener una copia de la Licencia en:</p>
</div>
<div class="paragraph">
<p><a href="http://www.apache.org/licenses/LICENSE-2.0" class="bare">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</div>
<div class="paragraph">
<p>A menos que lo exija la ley aplicable o se acuerde por escrito, el software distribuido bajo la Licencia se distribuye "TAL CUAL",<br>
SIN GARANTÍAS O CONDICIONES DE NINGÚN TIPO, ya sean expresas o implícitas.<br>
Consulta la Licencia para conocer los permisos y las limitaciones bajo la Licencia.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.10.5<br>
Last updated 2024-12-06 17:26:40 UTC
</div>
</div>
</body>
</html>